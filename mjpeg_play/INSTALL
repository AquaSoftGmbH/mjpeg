Linux Audio/Video tools - LAVTOOLS
==================================

The lavtools stand for "Linux/Audio video tools" and are released
under the General GNU Public Licence, see the COPYING file for
details.

Required Software
-----------------


*** Software you *must* have installed

1) Quicktime4Linux 1.2.0 - http://heroine.linuxave.net/quicktime.html

The configure scripts look for this in /usr/local/src/quicktime or
/usr/local/src/quicktime4linux-1.2 by default.  You can specify
another directory using the --with-quicktime flag to the ./configure
script.

N.b. it would seem that quicktime-1.2 is a little picky about the
compilers it is built under.  You may get complaints about missing
functions.  If so you need to try a more up-to-date gcc or egcs or an
older quicktime library that doesn't include the offending code
(support for digital video that makes heavy use of inline's). If this
is the case a hacked version of Q4L can be found where you found this.
Furthermore, in its original form the Quicktime library includes a
built-in jpeg library.  This prevents full use being made of the
somewhat faster MMX version available (see 2. below).  It is easy to
hack out the jpeg stuff but if you don't fancy that you can use a
pre-hacked version downloadable from where you got this package.

The file is called "quicktime4linux-1.2njpg.tar.gz"

./configure
make

No need (or sense) in "make install"-ing as: (a) Its a hacked version
and you don't want to muddle it up with the original and then abuse
the original author for deficiencies we introduced.  (b) The configure scripts for expect to look for the source anyway.

2) The MMX enhanced jpeg library from the same place you got this package.

O.k. actually, you *don't* need this.libjpeg6 (libjpeg6a or 6b is
included in the standard distributions) along with the corresponding
"jpegint.h" header file from the source code wiil do. This header file
is needed so that the colour-space conversion routines to be used by
the jpeg library can be correctly set for the state of the X display.

However, by far the simplest solution is to the faster patched MMX
version that can be found with where you obtained this software.  The
file is called:

"jpeg-mxx-0.1.2.tar.gz"

Compile and install: 

./configure
make
make install     

You'll need to have write permission to /usr/local/lib and /usr/local/include
for the install.

It is *strongly* recommended you compile and install this.  Don't
worry about it messing up your precious system jpeg libs.  Its default
settings (which are those expected by the scripts for lavtools)
install only simple static libraries in /usr/local named jpeg-mmx to
prevent clashes.


3) The libmovtar library for handling audio/video streams in "movtar" format.
Very handy for hacking around, moving between formats, and experimentation.

The file is called: "libmovtar-0.1.1.tar.gz".

Compile and install: 

./configure
make
make install     

You'll need to be able to write to /usr/local/lib and /usr/local/include
for the install.


3) The GLib library - http://www.gtk.org
(libglib .... is included in the standard distributions)


4) The SDL library -  http://www.libsdl.org/
   I used SDL 1.1.6 for development, please tell me if the 
   new SDL versions won't compile with this software ! 

	Some rather tricky and difficult to repeat problems centred around the
	use of pre-compiled versions of this library.  If software
	playback crashes out on you immediately try compiling and
	installing SDL from source-code.

5) A reasonably up-to-date installation of the "xforms" library.
In RedHat land xforms-0.88.1-1 (you need the -devel too) is known to work.


6) If you wish to recompile the mpeg encoder you'll need a recent version
of the "nasm" assembler.


*** Software you'll find useful


Irritatingly some older installation make the header "X11/forms.h" whilst
more recent ones use "forms.h".  If compilation stops with one of these
files missing make sure you have forms installed.  The 0.88.1-1 rpm's
for RedHat seem to work fine.


1) The "toolame" MP2 encoder and the "sox" audio processing tool.

A remark regarding RPM packages: If you want to install RPM packages
instead, always keep in mind that you need to install the developer
versions.

(www.freshmeat.net is also a good source for all kind of Linux soft !)


2) If you want to transcode MPEG-2 video from DTV or DVD formats
you'll want to get the ac3dec and mpeg2dec decoder tools with the
appropriate output plugin's for producing streamed wav and lavtools
"yuv" format.  At the time of writing rapid change in both programs
code bases meant that the necessary patches hadn't been merged into
their main cvs branches / distributions.  As a stop-gap a couple of
working snapshots in tarball form can be found in the ftp files
area of mjpeg.sourceforge.net.

ftp://mjpeg.sourceforge.net/pub/mjpeg



*** How to it...

To build the package just type :

./autogen.sh

(This sets up the configuration script ./configure, 
 and runs it to autoconfigure and create the Makefile's)

make

(This actually compiles the programs).

Then (with root privileges if needed) :

make install


(This installs them in /usr/local/bin).

If you have installed Quicktime4Linux and/or the jpeg libraries in
unusual places you may need to run ./configure manually with
options set to tell it where they are.

You should now be able to run the lavtools and MPEG compressors at least.

For the best results you probably want to make the lavplay and lavrec
programs setuid root.  I.e. make them owned by root and set the "s"
bit permissions bit with chmod.  This will allow them to run key
threads with real-time priority.  Its not done by the installer as it
is a bit risky and we'd prefer people to be able to try it under
controlled conditions.

Have a look at the README to see how the lavtools (ought to ;) ) work ...

/Andrew <as@comlab.ox.ac.uk>
/Gernot <gz@lysator.liu.se>

