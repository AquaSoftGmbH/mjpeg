.TH "yuvscaler" "1" "V 2.2" "Xavier Biquard" "description"
.SH NAME
yuvscaler \- downscales arbitrary sized yuv frames (stdin by default) to a
specified format (to stdout)
.SH SYNOPSIS
.B yuvscaler -I 
[
.I input_keyword
]
.B -M 
[
.I mode_keyword
]
.B -O
[
.I output_keyword
]
[
.B n
.B p
|
.B s
|
.B n
] 
[
.B -v 
0-2
]
[
.B -h
]
[
.I mjpegfiles
]
.SH DESCRIPTION
\fByuvscaler\fP is a general downscaling utility that is provided to
make allow conversion between different video formats. It can filter
YUV4MPEG format stream between stdin and stdout or can generate a
YUV4MPEG stream from one or more MJPEG video files in any of the
\fBmjpegtools\fP(1) container formats (AVI, Quicktime, movtar, edit
list).  The most common use of yuvscaler is to generate input suitable
for MPEG encoding to VCD or SVCD formats using \fBmpeg2enc\fP(1).

\fByuvscaler\fP will automatically take into account PAL/SECAM and
NTSC format, as well as widescreen (16:9) format and interlacing. Use
of yuvscaler was designed to be straithforward.

.SH EXAMPLES

\fBVCD encoding:
.br
\fPyuvscaler -O VCD my-file.avi | mpeg2enc -o vcd.%d.m1v

\fBSVCD encoding:
.br
\fPyuvscaler -O SVCD my-file.mov | mpeg2enc -m 2 -F 3 -o svcd.%d.m2v

\fBEncoding anamorphic 16:9 as letterboxed VCD:
.br
\fPyuvscaler -M WIDE2VCD my-ana16-9.eli | mpeg2enc -o letterboxvcd.%d.m1v

.SH OPTIONS

.TP 
.B -I \fIinput_keyword\fP
.IP
Specifies input processing options.  Input options may be combined by using
multiple \fB-I\fP flags. Possible \fIinput_keyword\fPs are:

.IP
\fBUSE_WidthxHeight+WidthOffset+HeightOffset\fP - select the area of
input frames to be processed (the rest is ignored).
.IP
\fBINTERLACED_ODD_FIRST\fP  to treat stdin input as interlaced, odd  first frame input stream.
.IP
\fBINTERLACED_EVEN_FIRST\fP to treat stdin input as interlaced, even first frame input stream.
.IP	  

\fBNote:\fP Due to a deficiency in the current version of YUV4MPEG
format interlacing type is not recorded.  If input comes from stdin
yuvscaler has to guess, and simply assumes the frames are
non-interlaced.  If the video \fIis\fP interlaced used the above
options to switch \fByuvscaler\fP to the correct scaling mode.

.TP 
.B -M \fBmode_keyword\fP
.IP
Sets the scaling mode options.  Scaling mode options can be combined by giving several
\fB-M\fP flags.
Possible  are:

.IP
\fBWIDE2STD\fP - convert widescreen anamorphic (16:9) input video
into letterboxed (4:3) , generating necessary black lines.  Note that
for MPEG applications if your \fIplayer\fP can properly decode
anamorphic video you may wish to leave the video unscaled and simply
specify the approprate format during MPEG encoding (see \fBmpeg2enc\fP(1)).
.IP
\fBRATIO_WidthIn_WidthOut_HeightIn_HeightOut\fP to specified
downscaling ratios of WidthIn/WidthOut for width and
HeightIN/HeightOut for height to be applied to the useful area. The
output frames that result from dowscaling can have a different format
than the output format specified using \fB-O\fP options(s).  In this
case, \fByuvscaler\fP automatically generate necessary black lines and
columns and/or skips necessary lines and columns to center the scaled
image in the output frame.
.IP
\fBWIDE2VCD\fP to scale anamorphic widescreen (16:9) frames at half-scale (VCD) resolution into letterboxed format (equivalent to -M WIDE2STD -O VCD).  
.IP
\fBFAST_WIDE2VCD\fP to transcode full-sized anamorphic (16:9) frames to letter-boxed VCD (equivalent to -M WIDE2STD -M RATIO_2_1_2_1 -O VCD, see below).

.TP 
.B -O \fIoutput_keyword\fP

.IP
Sets the output frame format options.  Output format
options can be combined by giving several \fB-O\fP flags.
By default,  output frames interlacing is identical to that of the
input frames.  The options force output to be re-arranged into
the specified interlace format.  

.IP
\fBMONOCHROME\fP to generate monochrome frames on outpul.  Chrominance
information for the scaled pixels is set neutral (white).  MPEG
encoding of black and white video will be both inefficient \fIand\fP
show annonying chrominance artefacts unless this is done.
.IP
\fBVCD\fP to generate VCD compliant frames on output (taking care of
PAL and NTSC standards). Non-interlaced output.
.IP
\fBSVCD\fP to generate SVCD compliant frames on output (taking care of
PAL and NTSC standards, and interlace ).
.IP
\fBSIZE_WidthxHeight\fP to generate frames of size WidthxHeight on
output (multiple of 4)
.IP
\fBINTERLACED_ODD_FIRST\fP force interlaced, odd field first frame
output stream.

\fBINTERLACED_EVEN_FIRST\fP force interlaced, even field first frame
output stream.

\fBNON_INTERLACED\fP to force non interlaced output frames.
.IP

.PP
The most useful downscaling ratios are handled using dedicated optimised
scaling routines. They are:
.IP
RATIO_WidthIn_WidthOut_1_1 => downscaling only concerns width, not height
.IP
RATIO_3_2_1_1 => SVCD downscaling
.IP
RATIO_1_1_HeightIn_HeightOut => downscaling only concerns height, not width
.IP
RATIO_1_1_4_3 => WIDE2STD downscaling mode
.IP
RATIO_WidthIn_WidthOut_2_1 => VCD downscaling
.IP
RATIO_2_1_2_1 => slightly width distorted (reale ratio 45 to 22) but faster VCD downscaling (-M RATIO_2_1_2_1 -O VCD)
.IP
RATIO_WidthIn_WidthOut_8_3 => specific to WIDE2VCD downscaling (-M WIDE2STD -O VCD)
.IP
RATIO_2_1_8_3 => specific to (slighly distorted) FAST_WIDE2VCD downscaling (-M WIDE2STD -M RATIO_2_1_2_1 -O VCD)
.IP
RATIO_1_1_1_1 => copy useful input part of possible several files into output frames
.TP 
.B -n p|s|n 
Specifies the OUTPUT norm for VCD/SVCD (p=pal,s=secam,n=ntsc).
.TP
.B -v 0|1|2
Specifies the degree of verbosity: 0=quiet, 1=normal, 2=verbose/debug
.TP
.B -h
Prints a summary of command line syntax.

.SH SEE ALSO
.BR mjpegtools (1),
.BR lavpipe (1),
.BR lav2yuv (1)
.BR mpeg2enc (1)

.SH CONTACT
If you have questions, remarks, problems or you just want to contact
the developers, the main mailing list for the MJPEG\-tools is:
  \fImjpeg\-users@lists.sourceforge.net\fP

For more info, see our website at \fIhttp://mjpeg.sourceforge.net/
